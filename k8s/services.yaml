---
# YOLO Inference Service
apiVersion: v1
kind: Service
metadata:
  name: yolo-service
  namespace: vision-system
  labels:
    app: yolo
    component: inference
spec:
  type: LoadBalancer
  selector:
    app: yolo
    component: inference
  ports:
    - name: http
      port: 8000
      targetPort: 8000
      protocol: TCP
  sessionAffinity: ClientIP
  sessionAffinityConfig:
    clientIP:
      timeoutSeconds: 3600

---
# Logging Service
apiVersion: v1
kind: Service
metadata:
  name: logging-service
  namespace: vision-system
  labels:
    app: logging
    component: storage
spec:
  type: ClusterIP
  selector:
    app: logging
    component: storage
  ports:
    - name: http
      port: 8001
      targetPort: 8001
      protocol: TCP

---
# Headless Service for YOLO (for DNS pod discovery)
apiVersion: v1
kind: Service
metadata:
  name: yolo-headless
  namespace: vision-system
  labels:
    app: yolo
spec:
  clusterIP: None
  selector:
    app: yolo
    component: inference
  ports:
    - name: http
      port: 8000
      targetPort: 8000
      protocol: TCP

---
# Headless Service for Logging (for DNS pod discovery)
apiVersion: v1
kind: Service
metadata:
  name: logging-headless
  namespace: vision-system
  labels:
    app: logging
spec:
  clusterIP: None
  selector:
    app: logging
    component: storage
  ports:
    - name: http
      port: 8001
      targetPort: 8001
      protocol: TCP
